{"ast":null,"code":"import { take } from 'rxjs';\nimport { AddCommentComponent } from '../add-comment/add-comment.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/components/service/blog-service.service\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/icon\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/badge\";\nfunction BlogDetailComponent_div_0_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function BlogDetailComponent_div_0_div_5_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.updateBlogPost());\n    });\n    i0.ɵɵtext(2, \"Update\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function BlogDetailComponent_div_0_div_5_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.deleteBlog());\n    });\n    i0.ɵɵtext(4, \"Delete\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction BlogDetailComponent_div_0_div_21_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18)(1, \"div\", 19);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 20)(4, \"mat-icon\");\n    i0.ɵɵtext(5, \"account_circle\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 21);\n    i0.ɵɵelement(8, \"hr\")(9, \"br\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const comment_r7 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(comment_r7 == null ? null : comment_r7.content);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", comment_r7 == null ? null : comment_r7.user == null ? null : comment_r7.user.userName, \" \");\n  }\n}\nfunction BlogDetailComponent_div_0_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵelement(1, \"hr\", 5);\n    i0.ɵɵtemplate(2, BlogDetailComponent_div_0_div_21_div_2_Template, 10, 2, \"div\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.commentList);\n  }\n}\nfunction BlogDetailComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"h2\", 2);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 3);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, BlogDetailComponent_div_0_div_5_Template, 5, 0, \"div\", 4);\n    i0.ɵɵelement(6, \"hr\", 5);\n    i0.ɵɵelementStart(7, \"div\", 6)(8, \"div\", 7);\n    i0.ɵɵlistener(\"click\", function BlogDetailComponent_div_0_Template_div_click_8_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.onReactionPress(\"favorite\"));\n    });\n    i0.ɵɵelementStart(9, \"mat-icon\");\n    i0.ɵɵtext(10, \"favorite\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 8);\n    i0.ɵɵlistener(\"click\", function BlogDetailComponent_div_0_Template_div_click_11_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.onReactionPress(\"thumb_up\"));\n    });\n    i0.ɵɵelementStart(12, \"mat-icon\");\n    i0.ɵɵtext(13, \"thumb_up\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 9);\n    i0.ɵɵlistener(\"click\", function BlogDetailComponent_div_0_Template_div_click_14_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.onReactionPress(\"thumb_down\"));\n    });\n    i0.ɵɵelementStart(15, \"mat-icon\");\n    i0.ɵɵtext(16, \"thumb_down\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(17, \"hr\", 5);\n    i0.ɵɵelementStart(18, \"div\", 10)(19, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function BlogDetailComponent_div_0_Template_button_click_19_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.openCommentDialog());\n    });\n    i0.ɵɵtext(20, \"Add Comment\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(21, BlogDetailComponent_div_0_div_21_Template, 3, 1, \"div\", 12);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.blog == null ? null : ctx_r0.blog.postTitle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.blog == null ? null : ctx_r0.blog.postContent);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isAdmin);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"matBadge\", ctx_r0.blog == null ? null : ctx_r0.blog.favorite);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"matBadge\", ctx_r0.blog == null ? null : ctx_r0.blog.postlike);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"matBadge\", ctx_r0.blog == null ? null : ctx_r0.blog.disLike);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.commentList || ctx_r0.commentList !== null);\n  }\n}\nexport class BlogDetailComponent {\n  constructor(activatedRoute, blogService, dialog, router) {\n    this.activatedRoute = activatedRoute;\n    this.blogService = blogService;\n    this.dialog = dialog;\n    this.router = router;\n    this.commentList = [];\n    this.isAdmin = false;\n    activatedRoute?.params.subscribe(res => {\n      if (!!res && res?.id) {\n        this.id = res?.id;\n        this.isAdmin = this.blogService.getUserRole() === 'admin' ? true : false;\n        this.getBlogById();\n        this.getCommentByBlogId();\n      }\n    });\n  }\n  getBlogById() {\n    this.blogService.getBlogById(this.id).pipe(take(1)).subscribe(res => {\n      console.log('>>>>>>>>', res);\n      if (!!res && res?.postId) {\n        this.blog = res;\n      }\n    });\n  }\n  onReactionPress(reaction) {\n    if (reaction === 'favorite') {\n      if (this.blog) {\n        this.blog.favorite += 1;\n        this.updateBlog();\n      }\n    } else if (reaction === 'thumb_up') {\n      if (this.blog) {\n        this.blog.postlike += 1;\n        this.updateBlog();\n      }\n    } else if (reaction === 'thumb_down') {\n      if (this.blog) {\n        this.blog.disLike += 1;\n        this.updateBlog();\n      }\n    }\n  }\n  updateBlog() {\n    this.blogService.updateBlog(this.blog, this.blog?.postId, 1).pipe(take(1)).subscribe(res => {\n      console.log('>>>>>', res);\n    });\n  }\n  openCommentDialog() {\n    const dlg = this.dialog.open(AddCommentComponent, {\n      data: {},\n      maxWidth: '100vw',\n      maxHeight: '100vh',\n      height: '80%',\n      width: '80%'\n    });\n    dlg.afterClosed().subscribe(res => {\n      if (!!res) {\n        const content = res?.content;\n        console.log('>>>>', content);\n        if (content === '') {\n          alert('Blank comment not allowed');\n        } else {\n          const userId = this.blogService.getAuthorization();\n          const body = {\n            content: content\n          };\n          this.blogService.addCommentToBlog(body, this.blog?.postId, userId).pipe(take(1)).subscribe(resp => {\n            if (!!resp && resp?.status && resp?.status === 'success') {\n              this.getCommentByBlogId();\n              alert('Comment Added Successfully');\n            }\n          });\n        }\n      }\n    });\n  }\n  getCommentByBlogId() {\n    this.blogService.getCommentByBlogId(this.id).pipe(take(1)).subscribe(res => {\n      if (res) {\n        this.commentList = res;\n      }\n    });\n  }\n  deleteBlog() {\n    this.blogService.deleteBlogById(this.blog?.postId).pipe(take(1)).subscribe(res => {\n      if (res && res?.status && res?.status === 'success') {\n        alert('Blog deleted successfully...');\n        const role = this.blogService.getUserRole();\n        if (res?.role === 'admin') {\n          this.router.navigate(['/admin/blog-list']);\n        } else {\n          this.router.navigate(['/client/blog-list']);\n        }\n      }\n    });\n  }\n  updateBlogPost() {\n    this.router.navigate(['/admin/create-blog'], {\n      queryParams: {\n        id: this.blog?.postId\n      }\n    });\n  }\n}\nBlogDetailComponent.ɵfac = function BlogDetailComponent_Factory(t) {\n  return new (t || BlogDetailComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.BlogService), i0.ɵɵdirectiveInject(i3.MatDialog), i0.ɵɵdirectiveInject(i1.Router));\n};\nBlogDetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: BlogDetailComponent,\n  selectors: [[\"app-blog-detail\"]],\n  decls: 1,\n  vars: 1,\n  consts: [[\"class\", \"blog-container\", 4, \"ngIf\"], [1, \"blog-container\"], [1, \"post-title\"], [1, \"post-content\"], [\"class\", \"admin-buttons\", 4, \"ngIf\"], [1, \"separator\"], [1, \"reaction-buttons\"], [\"matBadgePosition\", \"after\", \"matBadgeColor\", \"warn\", 1, \"reaction-item\", 3, \"matBadge\", \"click\"], [\"matBadgePosition\", \"after\", \"matBadgeColor\", \"primary\", 1, \"reaction-item\", 3, \"matBadge\", \"click\"], [\"matBadgePosition\", \"after\", \"matBadgeColor\", \"accent\", 1, \"reaction-item\", 3, \"matBadge\", \"click\"], [1, \"add-comment-section\"], [\"mat-raised-button\", \"\", \"color\", \"accent\", 1, \"add-comment-btn\", 3, \"click\"], [\"class\", \"comment-section\", 4, \"ngIf\"], [1, \"admin-buttons\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"admin-btn\", \"update-btn\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 1, \"admin-btn\", \"delete-btn\", 3, \"click\"], [1, \"comment-section\"], [\"class\", \"comment-items\", 4, \"ngFor\", \"ngForOf\"], [1, \"comment-items\"], [1, \"comment-content\"], [1, \"comment-user\"], [1, \"comment-separator\"]],\n  template: function BlogDetailComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, BlogDetailComponent_div_0_Template, 22, 7, \"div\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.blog || ctx.blog !== null);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf, i5.MatIcon, i6.MatButton, i7.MatBadge],\n  styles: [\"var[_ngcontent-%COMP%]   resource[_ngcontent-%COMP%];\\n (()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  { // webpackBootstrap\\n \\tvar __webpack_modules__ = ({\\n\\n 245:\\n\\n (() => {\\n\\nthrow new Error(\\\"Module build failed (from ./node_modules/postcss-loader/dist/cjs.js):\\\\nSyntaxError\\\\n\\\\n(234:5) D:\\\\\\\\BLOG_PROJ\\\\\\\\Blog_frontend\\\\\\\\src\\\\\\\\app\\\\\\\\shared\\\\\\\\blog-detail\\\\\\\\blog-detail.component.css Unclosed block\\\\n\\\\n \\\\u001b[90m 232 | \\\\u001b[39m        transform\\\\u001b[33m:\\\\u001b[39m \\\\u001b[36mtranslateY\\\\u001b[39m\\\\u001b[36m(10px)\\\\u001b[39m\\\\u001b[33m;\\\\u001b[39m\\\\n \\\\u001b[90m 233 | \\\\u001b[39m    \\\\u001b[33m}\\\\u001b[39m\\\\n\\\\u001b[1m\\\\u001b[31m>\\\\u001b[39m\\\\u001b[22m\\\\u001b[90m 234 | \\\\u001b[39m    100% \\\\u001b[33m{\\\\u001b[39m\\\\n \\\\u001b[90m     | \\\\u001b[39m    \\\\u001b[1m\\\\u001b[31m^\\\\u001b[39m\\\\u001b[22m\\\\n \\\\u001b[90m 235 | \\\\u001b[39m        opacity\\\\u001b[33m:\\\\u001b[39m 1\\\\u001b[33m;\\\\u001b[39m\\\\n \\\\u001b[90m 236 | \\\\u001b[39m       \\\\n\\\");\\n\\n })\\n\\n \\t});\\n\\n \\t\\n \\t// startup\\n \\t// Load entry module and return exports\\n \\t// This entry module doesn't tell about it's top-level declarations so it can't be inlined\\n \\tvar __webpack_exports__ = {};\\n \\t__webpack_modules__[245]();\\n \\tresource = __webpack_exports__;\\n \\t\\n })()\\n;\\n/*# sourceMappingURL=blog-detail.component.css.map*/\"]\n});","map":{"version":3,"mappings":"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","names":["take","AddCommentComponent","i0","BlogDetailComponent","constructor","activatedRoute","blogService","dialog","router","params","subscribe","res","id","isAdmin","getUserRole","getBlogById","getCommentByBlogId","pipe","console","log","postId","blog","onReactionPress","reaction","favorite","updateBlog","postlike","disLike","openCommentDialog","dlg","open","data","maxWidth","maxHeight","height","width","afterClosed","content","alert","userId","getAuthorization","body","addCommentToBlog","resp","status","commentList","deleteBlog","deleteBlogById","role","navigate","updateBlogPost","queryParams","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["D:\\BLOG_PROJ\\Blog_frontend\\src\\app\\shared\\blog-detail\\blog-detail.component.ts","D:\\BLOG_PROJ\\Blog_frontend\\src\\app\\shared\\blog-detail\\blog-detail.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { take } from 'rxjs';\nimport { BlogService } from 'src/app/components/service/blog-service.service';\nimport { Blog } from 'src/app/model/blog.model';\nimport { AddCommentComponent } from '../add-comment/add-comment.component';\nimport { MatDialog } from '@angular/material/dialog';\nimport { Comment } from 'src/app/model/comment.model';\n\n@Component({\n  selector: 'app-blog-detail',\n  templateUrl: './blog-detail.component.html',\n  styleUrls: ['./blog-detail.component.css']\n})\nexport class BlogDetailComponent {\n  id: any;\n  blog: Blog | undefined | null;\n  commentList: Array<Comment> = [];\n  isAdmin: boolean = false;\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private blogService: BlogService,\n    private dialog: MatDialog,\n    private router: Router\n  ) {\n    activatedRoute?.params.subscribe((res: any) => {\n      if (!!res && res?.id) {\n        this.id = res?.id;\n        this.isAdmin = this.blogService.getUserRole() === 'admin' ? true : false;\n        this.getBlogById();\n        this.getCommentByBlogId();\n      }\n    });\n  }\n\n  getBlogById() {\n    this.blogService.getBlogById(this.id).pipe(take(1)).subscribe((res: any) => {\n      console.log('>>>>>>>>', res);\n      if (!!res && res?.postId) {\n        this.blog = res;\n      }\n    })\n  }\n\n  onReactionPress(reaction: string): void {\n    if (reaction === 'favorite') {\n      if (this.blog) {\n        this.blog.favorite += 1;\n        this.updateBlog();\n      }\n    } else if (reaction === 'thumb_up') {\n      if (this.blog) {\n        this.blog.postlike += 1;\n        this.updateBlog();\n      }\n    } else if (reaction === 'thumb_down') {\n      if (this.blog) {\n        this.blog.disLike += 1;\n        this.updateBlog();\n      }\n    }\n  }\n\n  updateBlog(): void {\n    this.blogService.updateBlog(this.blog, this.blog?.postId, 1).pipe(take(1)).subscribe((res: any) => {\n      console.log('>>>>>', res);\n    });\n  }\n\n  openCommentDialog(): void {\n    const dlg = this.dialog.open(AddCommentComponent, {\n      data: {},\n      maxWidth: '100vw',\n      maxHeight: '100vh',\n      height: '80%',\n      width: '80%'\n    });\n    dlg.afterClosed().subscribe((res: any) => {\n      if (!!res) {\n        const content = res?.content;\n        console.log('>>>>', content)\n        if (content === '') {\n          alert('Blank comment not allowed');\n        } else {\n          const userId = this.blogService.getAuthorization();\n          const body: any = {\n            content: content\n          };\n          this.blogService.addCommentToBlog(body, this.blog?.postId, userId).pipe(take(1)).subscribe((resp: any) => {\n            if (!!resp && resp?.status && resp?.status === 'success') {\n              this.getCommentByBlogId();\n              alert('Comment Added Successfully');\n            }\n          });\n        }\n      }\n    });\n  }\n\n  getCommentByBlogId(): void {\n    this.blogService.getCommentByBlogId(this.id).pipe(take(1)).subscribe((res: any) => {\n      if (res) {\n        this.commentList = res;\n      }\n    });\n  }\n\n  deleteBlog(): void {\n    this.blogService.deleteBlogById(this.blog?.postId).pipe(take(1)).subscribe((res => {\n      if (res && res?.status && res?.status === 'success') {\n        alert('Blog deleted successfully...');\n        const role = this.blogService.getUserRole();\n        if (res?.role === 'admin') {\n          this.router.navigate(['/admin/blog-list']);\n        } else {\n          this.router.navigate(['/client/blog-list']);\n        }\n      }\n    }));\n  }\n\n  updateBlogPost(): void {\n    this.router.navigate(['/admin/create-blog'], {\n      queryParams: {\n        id: this.blog?.postId\n      }\n    });\n  }\n}\n","<!-- <div *ngIf=\"blog || blog !== null\">\n    <H2>{{blog?.postTitle}}</H2>\n    <div class=\"postcontent\">{{blog?.postContent}}</div>\n    \n    <div class=\"update-delete-button\" *ngIf=\"isAdmin\">\n        <button mat-raised-button color=\"primary\" (click)=\"updateBlogPost()\">Update</button>\n        <button mat-raised-button color=\"primary\" (click)=\"deleteBlog()\">Delete</button>\n    </div>\n    <hr />\n        <div class=\"menu-options\">\n            <div  matBadge={{blog?.favorite}} matBadgePosition=\"after\" matBadgeColor=\"accent\" (click)=\"onReactionPress('favorite')\">\n                <mat-icon>favorite</mat-icon>\n            </div>\n            <div matBadge={{blog?.postlike}} matBadgePosition=\"after\" matBadgeColor=\"accent\" (click)=\"onReactionPress('thumb_up')\">\n                <mat-icon>thumb_up</mat-icon>\n            </div>\n            <div matBadge={{blog?.disLike}} matBadgePosition=\"after\" matBadgeColor=\"accent\" (click)=\"onReactionPress('thumb_down')\">\n                <mat-icon>thumb_down</mat-icon>\n            </div>\n        </div>\n    <hr />\n    <div class=\"add_comment\">\n        <button mat-raised-button  color=\"primary\" (click)=\"openCommentDialog()\">Add Comment</button>\n    </div>\n    <div *ngIf=\"commentList || commentList !== null\" class=\"comment-list\">\n        <hr />\n        <div class=\"comment-items\" *ngFor=\"let comment of commentList\">\n            <div class=\"content\">{{comment?.content}}</div>\n            <div class=\"user-name\"><mat-icon>account_circle</mat-icon>{{comment?.user?.userName}}</div>\n            <div class=\"blank-line\">\n                <hr /> <br />\n            </div>\n        </div>\n    </div>\n</div> -->\n<div *ngIf=\"blog || blog !== null\" class=\"blog-container\">\n    <!-- Blog Post Title -->\n    <h2 class=\"post-title\">{{blog?.postTitle}}</h2>\n    <div class=\"post-content\">{{blog?.postContent}}</div>\n    \n    <!-- Admin Buttons -->\n    <div *ngIf=\"isAdmin\" class=\"admin-buttons\">\n        <button mat-raised-button color=\"primary\" (click)=\"updateBlogPost()\" class=\"admin-btn update-btn\">Update</button>\n        <button mat-raised-button color=\"warn\" (click)=\"deleteBlog()\" class=\"admin-btn delete-btn\">Delete</button>\n    </div>\n\n    <hr class=\"separator\"/>\n\n    <!-- Reaction Buttons -->\n    <div class=\"reaction-buttons\">\n        <div matBadge=\"{{blog?.favorite}}\" matBadgePosition=\"after\" matBadgeColor=\"warn\" (click)=\"onReactionPress('favorite')\" class=\"reaction-item\">\n            <mat-icon>favorite</mat-icon>\n        </div>\n        <div matBadge=\"{{blog?.postlike}}\" matBadgePosition=\"after\" matBadgeColor=\"primary\" (click)=\"onReactionPress('thumb_up')\" class=\"reaction-item\">\n            <mat-icon>thumb_up</mat-icon>\n        </div>\n        <div matBadge=\"{{blog?.disLike}}\" matBadgePosition=\"after\" matBadgeColor=\"accent\" (click)=\"onReactionPress('thumb_down')\" class=\"reaction-item\">\n            <mat-icon>thumb_down</mat-icon>\n        </div>\n    </div>\n\n    <hr class=\"separator\"/>\n\n    <!-- Add Comment Button -->\n    <div class=\"add-comment-section\">\n        <button mat-raised-button color=\"accent\" (click)=\"openCommentDialog()\" class=\"add-comment-btn\">Add Comment</button>\n    </div>\n\n    <!-- Comments Section -->\n    <div *ngIf=\"commentList || commentList !== null\" class=\"comment-section\">\n        <hr class=\"separator\"/>\n        <div class=\"comment-items\" *ngFor=\"let comment of commentList\">\n            <div class=\"comment-content\">{{comment?.content}}</div>\n            <div class=\"comment-user\">\n                <mat-icon>account_circle</mat-icon>{{comment?.user?.userName}}\n            </div>\n            <div class=\"comment-separator\">\n                <hr /> <br />\n            </div>\n        </div>\n    </div>\n</div>\n\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}