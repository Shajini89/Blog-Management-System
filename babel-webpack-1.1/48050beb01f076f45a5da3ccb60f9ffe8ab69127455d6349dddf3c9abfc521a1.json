{"ast":null,"code":"import { take } from 'rxjs';\nimport { AddCommentComponent } from '../add-comment/add-comment.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/components/service/blog-service.service\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/icon\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/badge\";\nfunction BlogDetailComponent_div_0_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function BlogDetailComponent_div_0_div_5_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.updateBlogPost());\n    });\n    i0.ɵɵtext(2, \"Update\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function BlogDetailComponent_div_0_div_5_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.deleteBlog());\n    });\n    i0.ɵɵtext(4, \"Delete\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction BlogDetailComponent_div_0_div_21_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 12);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 13)(4, \"mat-icon\");\n    i0.ɵɵtext(5, \"account_circle\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 14);\n    i0.ɵɵelement(8, \"hr\")(9, \"br\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const comment_r7 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(comment_r7 == null ? null : comment_r7.content);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(comment_r7 == null ? null : comment_r7.user == null ? null : comment_r7.user.userName);\n  }\n}\nfunction BlogDetailComponent_div_0_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵelement(1, \"hr\");\n    i0.ɵɵtemplate(2, BlogDetailComponent_div_0_div_21_div_2_Template, 10, 2, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.commentList);\n  }\n}\nfunction BlogDetailComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"H2\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 1);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, BlogDetailComponent_div_0_div_5_Template, 5, 0, \"div\", 2);\n    i0.ɵɵelement(6, \"hr\");\n    i0.ɵɵelementStart(7, \"div\", 3)(8, \"div\", 4);\n    i0.ɵɵlistener(\"click\", function BlogDetailComponent_div_0_Template_div_click_8_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.onReactionPress(\"favorite\"));\n    });\n    i0.ɵɵelementStart(9, \"mat-icon\");\n    i0.ɵɵtext(10, \"favorite\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 4);\n    i0.ɵɵlistener(\"click\", function BlogDetailComponent_div_0_Template_div_click_11_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.onReactionPress(\"thumb_up\"));\n    });\n    i0.ɵɵelementStart(12, \"mat-icon\");\n    i0.ɵɵtext(13, \"thumb_up\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 4);\n    i0.ɵɵlistener(\"click\", function BlogDetailComponent_div_0_Template_div_click_14_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.onReactionPress(\"thumb_down\"));\n    });\n    i0.ɵɵelementStart(15, \"mat-icon\");\n    i0.ɵɵtext(16, \"thumb_down\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(17, \"hr\");\n    i0.ɵɵelementStart(18, \"div\", 5)(19, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function BlogDetailComponent_div_0_Template_button_click_19_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.openCommentDialog());\n    });\n    i0.ɵɵtext(20, \"Add Comment\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(21, BlogDetailComponent_div_0_div_21_Template, 3, 1, \"div\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.blog == null ? null : ctx_r0.blog.postTitle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.blog == null ? null : ctx_r0.blog.postContent);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isAdmin);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"matBadge\", ctx_r0.blog == null ? null : ctx_r0.blog.favorite);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"matBadge\", ctx_r0.blog == null ? null : ctx_r0.blog.postlike);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"matBadge\", ctx_r0.blog == null ? null : ctx_r0.blog.disLike);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.commentList || ctx_r0.commentList !== null);\n  }\n}\nexport class BlogDetailComponent {\n  constructor(activatedRoute, blogService, dialog, router) {\n    this.activatedRoute = activatedRoute;\n    this.blogService = blogService;\n    this.dialog = dialog;\n    this.router = router;\n    this.commentList = [];\n    this.isAdmin = false;\n    activatedRoute?.params.subscribe(res => {\n      if (!!res && res?.id) {\n        this.id = res?.id;\n        this.isAdmin = this.blogService.getUserRole() === 'admin' ? true : false;\n        this.getBlogById();\n        this.getCommentByBlogId();\n      }\n    });\n  }\n  getBlogById() {\n    this.blogService.getBlogById(this.id).pipe(take(1)).subscribe(res => {\n      console.log('>>>>>>>>', res);\n      if (!!res && res?.postId) {\n        this.blog = res;\n      }\n    });\n  }\n  onReactionPress(reaction) {\n    if (reaction === 'favorite') {\n      if (this.blog) {\n        this.blog.favorite += 1;\n        this.updateBlog();\n      }\n    } else if (reaction === 'thumb_up') {\n      if (this.blog) {\n        this.blog.postlike += 1;\n        this.updateBlog();\n      }\n    } else if (reaction === 'thumb_down') {\n      if (this.blog) {\n        this.blog.disLike += 1;\n        this.updateBlog();\n      }\n    }\n  }\n  updateBlog() {\n    this.blogService.updateBlog(this.blog, this.blog?.postId, 1).pipe(take(1)).subscribe(res => {\n      console.log('>>>>>', res);\n    });\n  }\n  openCommentDialog() {\n    const dlg = this.dialog.open(AddCommentComponent, {\n      data: {},\n      maxWidth: '100vw',\n      maxHeight: '100vh',\n      height: '80%',\n      width: '80%'\n    });\n    dlg.afterClosed().subscribe(res => {\n      if (!!res) {\n        const content = res?.content;\n        console.log('>>>>', content);\n        if (content === '') {\n          alert('Blank comment not allowed');\n        } else {\n          const userId = this.blogService.getAuthorization();\n          const body = {\n            content: content\n          };\n          this.blogService.addCommentToBlog(body, this.blog?.postId, userId).pipe(take(1)).subscribe(resp => {\n            if (!!resp && resp?.status && resp?.status === 'success') {\n              this.getCommentByBlogId();\n              alert('Comment Added Successfully');\n            }\n          });\n        }\n      }\n    });\n  }\n  getCommentByBlogId() {\n    this.blogService.getCommentByBlogId(this.id).pipe(take(1)).subscribe(res => {\n      if (res) {\n        this.commentList = res;\n      }\n    });\n  }\n  deleteBlog() {\n    this.blogService.deleteBlogById(this.blog?.postId).pipe(take(1)).subscribe(res => {\n      if (res && res?.status && res?.status === 'success') {\n        alert('Blog deleted successfully...');\n        const role = this.blogService.getUserRole();\n        if (res?.role === 'admin') {\n          this.router.navigate(['/admin/blog-list']);\n        } else {\n          this.router.navigate(['/client/blog-list']);\n        }\n      }\n    });\n  }\n  updateBlogPost() {\n    this.router.navigate(['/admin/create-blog'], {\n      queryParams: {\n        id: this.blog?.postId\n      }\n    });\n  }\n}\nBlogDetailComponent.ɵfac = function BlogDetailComponent_Factory(t) {\n  return new (t || BlogDetailComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.BlogService), i0.ɵɵdirectiveInject(i3.MatDialog), i0.ɵɵdirectiveInject(i1.Router));\n};\nBlogDetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: BlogDetailComponent,\n  selectors: [[\"app-blog-detail\"]],\n  decls: 1,\n  vars: 1,\n  consts: [[4, \"ngIf\"], [1, \"postcontent\"], [\"class\", \"update-delete-button\", 4, \"ngIf\"], [1, \"menu-options\"], [\"matBadgePosition\", \"after\", \"matBadgeColor\", \"accent\", 3, \"matBadge\", \"click\"], [1, \"add_comment\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"class\", \"comment-list\", 4, \"ngIf\"], [1, \"update-delete-button\"], [1, \"comment-list\"], [\"class\", \"comment-items\", 4, \"ngFor\", \"ngForOf\"], [1, \"comment-items\"], [1, \"content\"], [1, \"user-name\"], [1, \"blank-line\"]],\n  template: function BlogDetailComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, BlogDetailComponent_div_0_Template, 22, 7, \"div\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.blog || ctx.blog !== null);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf, i5.MatIcon, i6.MatButton, i7.MatBadge],\n  styles: [\".menu-options[_ngcontent-%COMP%] {\\n    display: flex;\\n    justify-content: space-between;\\n}\\n.comment-list[_ngcontent-%COMP%] {\\n    padding: 10px;\\n}\\n\\n.comment-items[_ngcontent-%COMP%] {\\n    padding: 10px;\\n}\\n\\n.comment-items[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%] {\\n    font-weight: bold;\\n    font-size: 24px;\\n    margin-bottom: 12px;\\n}\\nh2[_ngcontent-%COMP%]\\n{\\n    font-family: Verdana, Geneva, Tahoma, sans-serif;\\n}\\n.comment-items[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%] {\\n    display: flex;\\n}\\n.comment-items[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{\\n    margin-right: 5px;\\n}\\n.update-delete-button[_ngcontent-%COMP%] {\\n    text-align: right;\\n}\\n\\n.update-delete-button[_ngcontent-%COMP%]   .mdc-button[_ngcontent-%COMP%] {\\n    margin-right: 5px;\\n\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2hhcmVkL2Jsb2ctZGV0YWlsL2Jsb2ctZGV0YWlsLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxhQUFhO0lBQ2IsOEJBQThCO0FBQ2xDO0FBQ0E7SUFDSSxhQUFhO0FBQ2pCOztBQUVBO0lBQ0ksYUFBYTtBQUNqQjs7QUFFQTtJQUNJLGlCQUFpQjtJQUNqQixlQUFlO0lBQ2YsbUJBQW1CO0FBQ3ZCO0FBQ0E7O0lBRUksZ0RBQWdEO0FBQ3BEO0FBQ0E7SUFDSSxhQUFhO0FBQ2pCO0FBQ0E7SUFDSSxpQkFBaUI7QUFDckI7QUFDQTtJQUNJLGlCQUFpQjtBQUNyQjs7QUFFQTtJQUNJLGlCQUFpQjs7QUFFckIiLCJzb3VyY2VzQ29udGVudCI6WyIubWVudS1vcHRpb25zIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbjtcbn1cbi5jb21tZW50LWxpc3Qge1xuICAgIHBhZGRpbmc6IDEwcHg7XG59XG5cbi5jb21tZW50LWl0ZW1zIHtcbiAgICBwYWRkaW5nOiAxMHB4O1xufVxuXG4uY29tbWVudC1pdGVtcyAuY29udGVudCB7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgZm9udC1zaXplOiAyNHB4O1xuICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG59XG5oMlxue1xuICAgIGZvbnQtZmFtaWx5OiBWZXJkYW5hLCBHZW5ldmEsIFRhaG9tYSwgc2Fucy1zZXJpZjtcbn1cbi5jb21tZW50LWl0ZW1zIC51c2VyLW5hbWUge1xuICAgIGRpc3BsYXk6IGZsZXg7XG59XG4uY29tbWVudC1pdGVtcyAudXNlci1uYW1lIC5tYXQtaWNvbntcbiAgICBtYXJnaW4tcmlnaHQ6IDVweDtcbn1cbi51cGRhdGUtZGVsZXRlLWJ1dHRvbiB7XG4gICAgdGV4dC1hbGlnbjogcmlnaHQ7XG59XG5cbi51cGRhdGUtZGVsZXRlLWJ1dHRvbiAubWRjLWJ1dHRvbiB7XG4gICAgbWFyZ2luLXJpZ2h0OiA1cHg7XG5cbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["take","AddCommentComponent","i0","BlogDetailComponent","constructor","activatedRoute","blogService","dialog","router","params","subscribe","res","id","isAdmin","getUserRole","getBlogById","getCommentByBlogId","pipe","console","log","postId","blog","onReactionPress","reaction","favorite","updateBlog","postlike","disLike","openCommentDialog","dlg","open","data","maxWidth","maxHeight","height","width","afterClosed","content","alert","userId","getAuthorization","body","addCommentToBlog","resp","status","commentList","deleteBlog","deleteBlogById","role","navigate","updateBlogPost","queryParams","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["D:\\BLOG_PROJ\\Blog_frontend\\src\\app\\shared\\blog-detail\\blog-detail.component.ts","D:\\BLOG_PROJ\\Blog_frontend\\src\\app\\shared\\blog-detail\\blog-detail.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { take } from 'rxjs';\nimport { BlogService } from 'src/app/components/service/blog-service.service';\nimport { Blog } from 'src/app/model/blog.model';\nimport { AddCommentComponent } from '../add-comment/add-comment.component';\nimport { MatDialog } from '@angular/material/dialog';\nimport { Comment } from 'src/app/model/comment.model';\n\n@Component({\n  selector: 'app-blog-detail',\n  templateUrl: './blog-detail.component.html',\n  styleUrls: ['./blog-detail.component.css']\n})\nexport class BlogDetailComponent {\n  id: any;\n  blog: Blog | undefined | null;\n  commentList: Array<Comment> = [];\n  isAdmin: boolean = false;\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private blogService: BlogService,\n    private dialog: MatDialog,\n    private router: Router\n  ) {\n    activatedRoute?.params.subscribe((res: any) => {\n      if (!!res && res?.id) {\n        this.id = res?.id;\n        this.isAdmin = this.blogService.getUserRole() === 'admin' ? true : false;\n        this.getBlogById();\n        this.getCommentByBlogId();\n      }\n    });\n  }\n\n  getBlogById() {\n    this.blogService.getBlogById(this.id).pipe(take(1)).subscribe((res: any) => {\n      console.log('>>>>>>>>', res);\n      if (!!res && res?.postId) {\n        this.blog = res;\n      }\n    })\n  }\n\n  onReactionPress(reaction: string): void {\n    if (reaction === 'favorite') {\n      if (this.blog) {\n        this.blog.favorite += 1;\n        this.updateBlog();\n      }\n    } else if (reaction === 'thumb_up') {\n      if (this.blog) {\n        this.blog.postlike += 1;\n        this.updateBlog();\n      }\n    } else if (reaction === 'thumb_down') {\n      if (this.blog) {\n        this.blog.disLike += 1;\n        this.updateBlog();\n      }\n    }\n  }\n\n  updateBlog(): void {\n    this.blogService.updateBlog(this.blog, this.blog?.postId, 1).pipe(take(1)).subscribe((res: any) => {\n      console.log('>>>>>', res);\n    });\n  }\n\n  openCommentDialog(): void {\n    const dlg = this.dialog.open(AddCommentComponent, {\n      data: {},\n      maxWidth: '100vw',\n      maxHeight: '100vh',\n      height: '80%',\n      width: '80%'\n    });\n    dlg.afterClosed().subscribe((res: any) => {\n      if (!!res) {\n        const content = res?.content;\n        console.log('>>>>', content)\n        if (content === '') {\n          alert('Blank comment not allowed');\n        } else {\n          const userId = this.blogService.getAuthorization();\n          const body: any = {\n            content: content\n          };\n          this.blogService.addCommentToBlog(body, this.blog?.postId, userId).pipe(take(1)).subscribe((resp: any) => {\n            if (!!resp && resp?.status && resp?.status === 'success') {\n              this.getCommentByBlogId();\n              alert('Comment Added Successfully');\n            }\n          });\n        }\n      }\n    });\n  }\n\n  getCommentByBlogId(): void {\n    this.blogService.getCommentByBlogId(this.id).pipe(take(1)).subscribe((res: any) => {\n      if (res) {\n        this.commentList = res;\n      }\n    });\n  }\n\n  deleteBlog(): void {\n    this.blogService.deleteBlogById(this.blog?.postId).pipe(take(1)).subscribe((res => {\n      if (res && res?.status && res?.status === 'success') {\n        alert('Blog deleted successfully...');\n        const role = this.blogService.getUserRole();\n        if (res?.role === 'admin') {\n          this.router.navigate(['/admin/blog-list']);\n        } else {\n          this.router.navigate(['/client/blog-list']);\n        }\n      }\n    }));\n  }\n\n  updateBlogPost(): void {\n    this.router.navigate(['/admin/create-blog'], {\n      queryParams: {\n        id: this.blog?.postId\n      }\n    });\n  }\n}\n","<div *ngIf=\"blog || blog !== null\">\n    <H2>{{blog?.postTitle}}</H2>\n    <div class=\"postcontent\">{{blog?.postContent}}</div>\n    <!-- <div>{{blog?.category}}</div> -->\n    <div class=\"update-delete-button\" *ngIf=\"isAdmin\">\n        <button mat-raised-button color=\"primary\" (click)=\"updateBlogPost()\">Update</button>\n        <button mat-raised-button color=\"primary\" (click)=\"deleteBlog()\">Delete</button>\n    </div>\n    <hr />\n        <div class=\"menu-options\">\n            <div  matBadge={{blog?.favorite}} matBadgePosition=\"after\" matBadgeColor=\"accent\" (click)=\"onReactionPress('favorite')\">\n                <mat-icon>favorite</mat-icon>\n            </div>\n            <div matBadge={{blog?.postlike}} matBadgePosition=\"after\" matBadgeColor=\"accent\" (click)=\"onReactionPress('thumb_up')\">\n                <mat-icon>thumb_up</mat-icon>\n            </div>\n            <div matBadge={{blog?.disLike}} matBadgePosition=\"after\" matBadgeColor=\"accent\" (click)=\"onReactionPress('thumb_down')\">\n                <mat-icon>thumb_down</mat-icon>\n            </div>\n        </div>\n    <hr />\n    <div class=\"add_comment\">\n        <button mat-raised-button  color=\"primary\" (click)=\"openCommentDialog()\">Add Comment</button>\n    </div>\n    <div *ngIf=\"commentList || commentList !== null\" class=\"comment-list\">\n        <hr />\n        <div class=\"comment-items\" *ngFor=\"let comment of commentList\">\n            <div class=\"content\">{{comment?.content}}</div>\n            <div class=\"user-name\"><mat-icon>account_circle</mat-icon>{{comment?.user?.userName}}</div>\n            <div class=\"blank-line\">\n                <hr /> <br />\n            </div>\n        </div>\n    </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}